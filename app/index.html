<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Mi Recetario Personal</title>
    <link rel="icon" href="imagenes/logo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="jqm/jquery.mobile-1.4.5.css">
    <script src="jqm/jquery-1.12.3.min.js"></script>
    <script src="jqm/jquery.mobile-1.4.5.js"></script>
    <link rel="stylesheet" href="estilos.css">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Josefin+Sans:wght@450&display=swap"
        rel="stylesheet">
    <style>
        .nota {
            background-color: rgb(143, 11, 11);
            color: white;
            border: 4px solid rgb(168, 58, 58);
            padding: 18px;
            position: relative;
            margin: 10px 0;
            text-shadow: none;
            box-shadow: 2px 2px rgb(0, 0, 0, .3);
            border-radius: 30px;
        }

        .nota2 {
            background-color: rgb(139, 196, 146);
            color: white;
            border: 4px solid rgb(84, 197, 137);
            padding: 18px;
            position: relative;
            margin: 10px 0;
            text-shadow: none;
            box-shadow: 2px 2px rgb(0, 0, 0, .3);
            border-radius: 30px;
        }

        .nota3 {
            background-color: rgb(48, 79, 190);
            color: white;
            border: 4px solid rgb(49, 79, 190);
            padding: 18px;
            position: relative;
            margin: 10px 0;
            text-shadow: none;
            box-shadow: 2px 2px rgb(0, 0, 0, .3);
            border-radius: 30px;
        }

        .nota4 {
            background-color: rgb(230, 88, 204);
            color: white;
            border: 4px solid rgb(231, 88, 204);
            padding: 18px;
            position: relative;
            margin: 10px 0;
            text-shadow: none;
            box-shadow: 2px 2px rgb(0, 0, 0, .3);
            border-radius: 30px;
        }

        .check {
            position: absolute;
            background-color: rgb(43, 226, 83);
            padding: 7px;
            border-radius: 50%;
            line-height: 0;
            top: 20px;
            right: 118px;
        }

        .edit {
            position: absolute;
            padding: 7px;
            border-radius: 50%;
            line-height: 0;
            background: rgb(255, 255, 0);
            top: 20px;
            right: 60px;
        }

        .delete {
            position: absolute;
            padding: 7px;
            border-radius: 50%;
            line-height: 0;
            background: rgb(255, 0, 0);
            top: 20px;
            right: 8px;
        }
    </style>
    <script>
        $(document).on("pageinit", function () {
            $.mobile.defaultPageTransition = "slide";
            $.mobile.defaultDialogTransition = "slidedown";
        });
    </script>
</head>

<body>
    <div data-role="page" id="home">
        <div data-role="header" data-position="fixed">
            <img src="imagenes/logo (2).png" alt="logo" width="90%" height="100%" class="logo">
        </div>
        <!-- menu -->
        <div role="main" class="ui-content" id="mana">
            <div class="ui-grid-a">
                <div class="ui-block-a">
                    <a href="#desayuno">
                        <img src="imagenes/desayuno.jpg" alt="icono grid">
                    </a>
                </div>
                <div class="ui-block-b">
                    <a href="#almuerzo">
                        <img src="imagenes/almuerzo.jpg" alt="icono grid">
                    </a>
                </div>
                <div class="ui-block-a">
                    <a href="#merienda">
                        <img src="imagenes/merienda.jpg" alt="icono grid">
                    </a>
                </div>
                <div class="ui-block-b">
                    <a href="#cena">
                        <img src="imagenes/cena.jpg" alt="icono grid">
                    </a>
                </div>
            </div>
            <div data-role="footer" data-position="fixed">
                <a href="#pop" data-role="button" data-icon="info" data-iconpos="notext" data-inline="true"
                    data-rel="popup">
                    <p>Info</p>
                </a>
                <div id="pop" data-role="popup" data-overlay-theme="b" data-history="false" data-corners="false"
                    class="ui-content" data-transition="slidedown">
                    <a href="#" data-rel="back" data-role="button" data-icon="delete" data-iconpos="notext"
                        class="ui-btn-right" data-theme="b" data-direction="reverse"
                        data-transition="slidedown">Cerrar</a>
                    <ul data-role="listview">
                        <li data-role="list-divider" data-theme="b">Desarrollo de Aplicaciones Multiplataforma</li>
                        <li>
                            <a href="#">
                                <img src="imagenes/aix.png" alt="aixa" style="border-radius: 50%; width: 60px; margin: 10px; box-shadow: rgba(0, 0, 0, .5) 2px 2px 0px;">
                                <h3>AIXA CALCAGNO <br><br></h3>
                                <p>CURSO: DMT5BV</p>
                                <span class="ui-li-count">TARDE</span>
                            </a>
                            <a href="mailto:aixa.calcagno@davinci.edu.ar">mail</a>
                        </li>
                        <li data-role="list-divider" data-theme="b"></li>
                        <li>
                            <a href="#">
                                <img src="imagenes/noe.png" alt="corona virus" style="border-radius: 50%; width: 60px; margin: 10px; box-shadow: rgba(0, 0, 0, .4) 2px 2px 0px;">
                                <h3>NOELIA NOVO <br><br></h3>
                                <p>Divergente</p>
                                <span class="ui-li-count">TARDE</span>
                            </a>
                            <a href="mailto:noelia.novo@davinci.edu.ar">mail</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- fin de menu -->

    <!-- Desayuno -->
    <div data-role="page" id="desayuno" data-theme="b">
        <div data-role="header">
            <h1>Desayunos</h1>
            <a href="#home" data-role="button" data-inline="true" class="back-right">Volver</a>
            <a href="#agregar">Agregar</a>
        </div>
        <div role="main" class="ui-content">
            <div id="notas"></div>
        </div>
    </div>

    <!-- agregar nota nueva -->
    <div data-role="page" id="agregar" data-theme="b">
        <div data-role="header">
            <h1>Nuevo Desayuno</h1>
            <a href="#" data-rel="back">Volver</a>
        </div>
        <div role="main" class="ui-content">
            <form>
                <input type="text" id="titulo" required placeholder="El título de la receta va acá...">
                <input type="text" id="contenido" required placeholder="Tu receta va acá...">
                <a href="#" class="botonesedit" data-role="button" data-inline="true" data-rel="back">Cancelar</a>
                <input type="submit" value="Guardar" data-inline="true" data-theme="a">
            </form>
        </div>
    </div>

    <!-- modificar receta -->
    <div data-role="page" id="modificar" data-theme="b">
        <div data-role="header">
            <h1>Modificar Receta</h1>
        </div>
        <div role="main" class="ui-content">
            <form>
                <input type="text" id="modifica_titulo" required placeholder="El título de la receta va acá...">
                <input type="text" id="modifica_contenido" required placeholder="Tu receta va acá...">
                <a href="#" data-role="button" class="botonesedit" data-inline="true" data-rel="back">Cancelar</a>
                <input type="submit" value="Guardar" data-inline="true" data-theme="a">
            </form>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            $.mobile.page.prototype.options.backBtnText = "Volver";
            $.mobile.page.prototype.options.addBackBtn = true;
            $.mobile.page.prototype.options.backBtnTheme = "d";

            // Manejar la clase personalizada para la transición
            $(document).on("click", ".back-right", function (e) {
                e.preventDefault();
                var link = $(this).attr("href");
                $.mobile.changePage(link, { transition: "slide", reverse: true });
            });

            cargarNotas('desayuno', '#notas', 'nota');

            // Evento para añadir nueva receta de Desayuno
            $('#agregar form').on('submit', function () {
                var titulo = $('#titulo').val();
                var contenido = $('#contenido').val();
                var nuevaNota = {
                    tipo: 'desayuno',
                    titulo: titulo,
                    contenido: contenido,
                    cumplido: false
                };
                guardarNota(nuevaNota);
                $.mobile.navigate('#desayuno');
                return false;
            });

            function guardarNota(nuevaNota) {
                var notas = localStorage.getItem("notas");
                if (!notas) {
                    notas = [];
                } else {
                    notas = JSON.parse(notas);
                }
                notas.push(nuevaNota);
                localStorage.setItem("notas", JSON.stringify(notas));
                cargarNotas('desayuno', '#notas', 'nota');
            }

            // Eventos para manejar la edición y eliminación de notas
            $('#notas').on("click", ".nota .delete", function () {
                var eliminar_nota = confirm("¿Estás seguro que deseas eliminar la receta?");
                if (eliminar_nota) {
                    $(this).parent().remove();
                    guardarNotasActualizadas();
                }
            });

            $('#notas').on("click", ".nota .check", function () {
                if ($(this).next().next().next().attr("data-cumplido") != "si") {
                    $(this).parent().css({
                        backgroundColor: "white",
                        color: "green"
                    });
                    $(this).next().next().next().attr("data-cumplido", "si");
                    guardarNotasActualizadas();
                } else {
                    $(this).parent().css({
                        backgroundColor: "green",
                        color: "white"
                    });
                    $(this).next().next().next().removeAttr("data-cumplido");
                    guardarNotasActualizadas();
                }
            });

            $('#notas').on("click", ".nota .edit", function () {
                var titulo_actual = $(this).parent().children("h3").text();
                var contenido_actual = $(this).parent().children("p").text();
                $('#modifica_titulo').val(titulo_actual);
                $('#modifica_contenido').val(contenido_actual);
                $(this).parent().attr("data-modificando", "este");
                $.mobile.navigate('#modificar');
            });

            $('#modificar form').on("submit", function () {
                var titulo_modificado = $('#modifica_titulo').val();
                var contenido_modificado = $('#modifica_contenido').val();
                var modificando = $('#notas').find("[data-modificando]");
                modificando.children('h3').text(titulo_modificado);
                modificando.children('p').text(contenido_modificado);
                modificando.removeAttr("data-modificando");
                guardarNotasActualizadas();

                $.mobile.navigate("#desayuno");
                return false;
            });

            function guardarNotasActualizadas() {
                var notas_actuales = [];
                $('#notas .nota').each(function () {
                    var nota = {
                        tipo: 'desayuno',
                        titulo: $(this).find('h3').text(),
                        contenido: $(this).find('p').text(),
                        cumplido: $(this).attr('data-cumplido') === 'si' ? true : false
                    };
                    notas_actuales.push(nota);
                });

                var todasNotas = JSON.parse(localStorage.getItem("notas")) || [];
                todasNotas = todasNotas.filter(nota => nota.tipo !== 'desayuno').concat(notas_actuales);
                localStorage.setItem("notas", JSON.stringify(todasNotas));
            }

            function cargarNotas(tipo, contenedor, claseNota) {
                var recuperados_json = localStorage.getItem("notas");
                if (recuperados_json != null && recuperados_json != undefined && recuperados_json != "") {
                    var recuperados_array = JSON.parse(recuperados_json);
                    $(contenedor).empty();
                    $.each(recuperados_array, function (indice, valor) {
                        if (valor.tipo === tipo) {
                            var nota = $('<div></div>');
                            nota.attr('class', claseNota)
                                .attr('data-cumplido', valor.cumplido ? 'si' : 'no')
                                .append('<a href="#" class="check"><img src="imagenes/a.png" alt="a"></a>')
                                .append('<a href="#" class="edit"><img src="imagenes/b.png" alt="b"></a>')
                                .append('<a href="#" class="delete"><img src="imagenes/c.png" alt="c"></a>')
                                .append('<h3>' + valor.titulo + '</h3>')
                                .append('<p>' + valor.contenido + '</p>');

                            if (valor.cumplido) {
                                nota.css({ backgroundColor: "green", color: "white" });
                            }

                            $(contenedor).append(nota);
                        }
                    });
                }
            }
        });
    </script>

    <!-- Almuerzo -->
    <div data-role="page" id="almuerzo">
        <div data-role="header">
            <h1>Almuerzos</h1>
            <a href="#home" data-role="button" data-inline="true" class="back-right">Volver</a>
            <a href="#agregar2">Agregar</a>
        </div>
        <div role="main" class="ui-content">
            <div id="notas2"></div>
        </div>
    </div>

    <!-- agregar nota nueva -->
    <div data-role="page" id="agregar2">
        <div data-role="header">
            <h1>Nuevo Almuerzo</h1>
            <a href="#" data-rel="back">Volver</a>
        </div>
        <div role="main" class="ui-content">
            <form>
                <input type="text" id="titulo2" required placeholder="El titulo de la receta va acá...">
                <input type="text" id="contenido2" required placeholder="Tu receta va acá...">
                <a href="#" class="botonesedit" data-role="button" data-inline="true" data-rel="back">Cancelar</a>
                <input type="submit" value="Guardar" data-inline="true" data-theme="a">
            </form>
        </div>
    </div>

    <!-- modificar receta -->
    <div data-role="page" id="modificar2">
        <div data-role="header">
            <h1>Modificar Receta</h1>
        </div>
        <div role="main" class="ui-content">
            <form>
                <input type="text" id="modifica_titulo2" required placeholder="El título de la receta va acá...">
                <input type="text" id="modifica_contenido2" required placeholder="Tu receta va acá...">
                <a href="#" data-role="button" class="botonesedit" data-inline="true" data-rel="back">Cancelar</a>
                <input type="submit" value="Guardar" data-inline="true" data-theme="b">
            </form>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            cargarNotas('almuerzo', '#notas2', 'nota2');

            // Evento para añadir nueva receta de Almuerzo
            $('#agregar2 form').on('submit', function () {
                var titulo2 = $('#titulo2').val();
                var contenido2 = $('#contenido2').val();
                var nuevaNota2 = {
                    tipo: 'almuerzo',
                    titulo: titulo2,
                    contenido: contenido2,
                    cumplido: false
                };
                guardarNota(nuevaNota2);
                $.mobile.navigate('#almuerzo');
                return false;
            });

            function guardarNota(nuevaNota2) {
                var notas = localStorage.getItem("notas");
                if (!notas) {
                    notas = [];
                } else {
                    notas = JSON.parse(notas);
                }
                notas.push(nuevaNota2);
                localStorage.setItem("notas", JSON.stringify(notas));
                cargarNotas('almuerzo', '#notas2', 'nota2');
            }

            // Eventos para manejar la edición y eliminación de notas
            $('#notas2').on("click", ".nota2 .delete", function () {
                var eliminar_nota2 = confirm("¿Estás seguro que deseas eliminar la receta?");
                if (eliminar_nota2) {
                    $(this).parent().remove();
                    guardarNotasActualizadas();
                }
            });

            $('#notas2').on("click", ".nota2 .check", function () {
                if ($(this).next().next().next().attr("data-cumplido") != "si") {
                    $(this).parent().css({
                        backgroundColor: "white",
                        color: "green"
                    });
                    $(this).next().next().next().attr("data-cumplido", "si");
                    guardarNotasActualizadas();
                } else {
                    $(this).parent().css({
                        backgroundColor: "green",
                        color: "white"
                    });
                    $(this).next().next().next().removeAttr("data-cumplido");
                    guardarNotasActualizadas();
                }
            });

            $('#notas2').on("click", ".nota2 .edit", function () {
                var titulo_actual2 = $(this).parent().children("h3").text();
                var contenido_actual2 = $(this).parent().children("p").text();
                $('#modifica_titulo2').val(titulo_actual2);
                $('#modifica_contenido2').val(contenido_actual2);
                $(this).parent().attr("data-modificando", "este2");
                $.mobile.navigate('#modificar2');
            });

            $('#modificar2 form').on("submit", function () {
                var titulo_modificado2 = $('#modifica_titulo2').val();
                var contenido_modificado2 = $('#modifica_contenido2').val();
                var modificando2 = $('#notas2').find("[data-modificando]");
                modificando2.children('h3').text(titulo_modificado2);
                modificando2.children('p').text(contenido_modificado2);
                modificando2.removeAttr("data-modificando");
                guardarNotasActualizadas();

                $.mobile.navigate("#almuerzo");
                return false;
            });

            function guardarNotasActualizadas() {
                var notas_actuales2 = [];
                $('#notas2 .nota2').each(function () {
                    var nota2 = {
                        tipo: 'almuerzo',
                        titulo: $(this).find('h3').text(),
                        contenido: $(this).find('p').text(),
                        cumplido: $(this).attr('data-cumplido') === 'si' ? true : false
                    };
                    notas_actuales2.push(nota2);
                });

                var todasNotas = JSON.parse(localStorage.getItem("notas")) || [];
                todasNotas = todasNotas.filter(nota => nota.tipo !== 'almuerzo').concat(notas_actuales2);
                localStorage.setItem("notas", JSON.stringify(todasNotas));
            }

            function cargarNotas(tipo, contenedor, claseNota) {
                var recuperados_json = localStorage.getItem("notas");
                if (recuperados_json != null && recuperados_json != undefined && recuperados_json != "") {
                    var recuperados_array = JSON.parse(recuperados_json);
                    $(contenedor).empty();
                    $.each(recuperados_array, function (indice, valor) {
                        if (valor.tipo === tipo) {
                            var nota = $('<div></div>');
                            nota.attr('class', claseNota)
                                .attr('data-cumplido', valor.cumplido ? 'si' : 'no')
                                .append('<a href="#" class="check"><img src="imagenes/a.png" alt="a"></a>')
                                .append('<a href="#" class="edit"><img src="imagenes/b.png" alt="b"></a>')
                                .append('<a href="#" class="delete"><img src="imagenes/c.png" alt="c"></a>')
                                .append('<h3>' + valor.titulo + '</h3>')
                                .append('<p>' + valor.contenido + '</p>');

                            if (valor.cumplido) {
                                nota.css({ backgroundColor: "green", color: "white" });
                            }

                            $(contenedor).append(nota);
                        }
                    });
                }
            }
        });
    </script>

    <!-- Merienda -->
    <div data-role="page" id="merienda" data-theme="c">
        <div data-role="header">
            <h1>Merienda</h1>
            <a href="#home" data-role="button" data-inline="true" class="back-right">Volver</a>
            <a href="#agregar3">Agregar</a>
        </div>
        <div role="main" class="ui-content">
            <div id="notas3"></div>
        </div>
    </div>

    <!-- agregar nota nueva -->
    <div data-role="page" id="agregar3" data-theme="c">
        <div data-role="header">
            <h1>Nueva Merienda</h1>
            <a href="#" data-rel="back">Volver</a>
        </div>
        <div role="main" class="ui-content">
            <form>
                <input type="text" id="titulo3" required placeholder="El título de la receta va acá...">
                <input type="text" id="contenido3" required placeholder="Tu receta va acá...">
                <a href="#" class="botonesedit" data-role="button" data-inline="true" data-rel="back">Cancelar</a>
                <input type="submit" value="Guardar" data-inline="true" data-theme="a">
            </form>
        </div>
    </div>

    <!-- modificar receta -->
    <div data-role="page" id="modificar3" data-theme="c">
        <div data-role="header">
            <h1>Modificar Receta</h1>
        </div>
        <div role="main" class="ui-content">
            <form>
                <input type="text" id="modifica_titulo3" required placeholder="El título de la receta va acá...">
                <input type="text" id="modifica_contenido3" required placeholder="El contenido de la receta va acá...">
                <a href="#" data-role="button" class="botonesedit" data-inline="true" data-rel="back">Cancelar</a>
                <input type="submit" value="Guardar" data-inline="true" data-theme="b">
            </form>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            cargarNotas('merienda', '#notas3', 'nota3');

            // Evento para añadir nueva receta de Merienda
            $('#agregar3 form').on('submit', function () {
                var titulo3 = $('#titulo3').val();
                var contenido3 = $('#contenido3').val();
                var nuevaNota3 = {
                    tipo: 'merienda',
                    titulo: titulo3,
                    contenido: contenido3,
                    cumplido: false
                };
                guardarNota(nuevaNota3);
                $.mobile.navigate('#merienda');
                return false;
            });

            function guardarNota(nuevaNota3) {
                var notas = localStorage.getItem("notas");
                if (!notas) {
                    notas = [];
                } else {
                    notas = JSON.parse(notas);
                }
                notas.push(nuevaNota3);
                localStorage.setItem("notas", JSON.stringify(notas));
                cargarNotas('merienda', '#notas3', 'nota3');
            }

            // Eventos para manejar la edición y eliminación de notas
            $('#notas3').on("click", ".nota3 .delete", function () {
                var eliminar_nota3 = confirm("¿Estás seguro que deseas eliminar la receta?");
                if (eliminar_nota3) {
                    $(this).parent().remove();
                    guardarNotasActualizadas();
                }
            });

            $('#notas3').on("click", ".nota3 .check", function () {
                if ($(this).next().next().next().attr("data-cumplido") != "si") {
                    $(this).parent().css({
                        backgroundColor: "white",
                        color: "green"
                    });
                    $(this).next().next().next().attr("data-cumplido", "si");
                    guardarNotasActualizadas();
                } else {
                    $(this).parent().css({
                        backgroundColor: "green",
                        color: "white"
                    });
                    $(this).next().next().next().removeAttr("data-cumplido");
                    guardarNotasActualizadas();
                }
            });

            $('#notas3').on("click", ".nota3 .edit", function () {
                var titulo_actual3 = $(this).parent().children("h3").text();
                var contenido_actual3 = $(this).parent().children("p").text();
                $('#modifica_titulo3').val(titulo_actual3);
                $('#modifica_contenido3').val(contenido_actual3);
                $(this).parent().attr("data-modificando", "este3");
                $.mobile.navigate('#modificar3');
            });

            $('#modificar3 form').on("submit", function () {
                var titulo_modificado3 = $('#modifica_titulo3').val();
                var contenido_modificado3 = $('#modifica_contenido3').val();
                var modificando3 = $('#notas3').find("[data-modificando]");
                modificando3.children('h3').text(titulo_modificado3);
                modificando3.children('p').text(contenido_modificado3);
                modificando3.removeAttr("data-modificando");
                guardarNotasActualizadas();

                $.mobile.navigate("#merienda");
                return false;
            });

            function guardarNotasActualizadas() {
                var notas_actuales3 = [];
                $('#notas3 .nota3').each(function () {
                    var nota3 = {
                        tipo: 'merienda',
                        titulo: $(this).find('h3').text(),
                        contenido: $(this).find('p').text(),
                        cumplido: $(this).attr('data-cumplido') === 'si' ? true : false
                    };
                    notas_actuales3.push(nota3);
                });

                var todasNotas = JSON.parse(localStorage.getItem("notas")) || [];
                todasNotas = todasNotas.filter(nota => nota.tipo !== 'merienda').concat(notas_actuales3);
                localStorage.setItem("notas", JSON.stringify(todasNotas));
            }

            function cargarNotas(tipo, contenedor, claseNota) {
                var recuperados_json = localStorage.getItem("notas");
                if (recuperados_json != null && recuperados_json != undefined && recuperados_json != "") {
                    var recuperados_array = JSON.parse(recuperados_json);
                    $(contenedor).empty();
                    $.each(recuperados_array, function (indice, valor) {
                        if (valor.tipo === tipo) {
                            var nota = $('<div></div>');
                            nota.attr('class', claseNota)
                                .attr('data-cumplido', valor.cumplido ? 'si' : 'no')
                                .append('<a href="#" class="check"><img src="imagenes/a.png" alt="a"></a>')
                                .append('<a href="#" class="edit"><img src="imagenes/b.png" alt="b"></a>')
                                .append('<a href="#" class="delete"><img src="imagenes/c.png" alt="c"></a>')
                                .append('<h3>' + valor.titulo + '</h3>')
                                .append('<p>' + valor.contenido + '</p>');

                            if (valor.cumplido) {
                                nota.css({ backgroundColor: "green", color: "white" });
                            }

                            $(contenedor).append(nota);
                        }
                    });
                }
            }
        });
    </script>

    <!-- Cena -->
    <div data-role="page" id="cena" data-theme="d">
        <div data-role="header">
            <h1>Cena</h1>
            <a href="#home" data-role="button" data-inline="true" class="back-right">Volver</a>
            <a href="#agregar4">Agregar</a>
        </div>
        <div role="main" class="ui-content">
            <div id="notas4"></div>
        </div>
    </div>

    <!-- agregar nota nueva -->
    <div data-role="page" id="agregar4" data-theme="d">
        <div data-role="header">
            <h1>Nueva Cena</h1>
            <a href="#" data-rel="back">Volver</a>
        </div>
        <div role="main" class="ui-content">
            <form>
                <input type="text" id="titulo4" required placeholder="El título de la receta va acá...">
                <input type="text" id="contenido4" required placeholder="Tu receta va acá...">
                <a href="#" class="botonesedit" data-role="button" data-inline="true" data-rel="back">Cancelar</a>
                <input type="submit" value="Guardar" data-inline="true" data-theme="a">
            </form>
        </div>
    </div>

    <!-- modificar receta -->
    <div data-role="page" id="modificar4" data-theme="d">
        <div data-role="header">
            <h1>Modificar Receta</h1>
        </div>
        <div role="main" class="ui-content">
            <form>
                <input type="text" id="modifica_titulo4" required placeholder="El título de la receta va acá...">
                <input type="text" id="modifica_contenido4" required placeholder="El contenido de la receta va acá...">
                <a href="#" data-role="button" class="botonesedit" data-inline="true" data-rel="back">Cancelar</a>
                <input type="submit" value="Guardar" data-inline="true" data-theme="b">
            </form>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            cargarNotas('cena', '#notas4', 'nota4');

            // Evento para añadir nueva receta de Cena
            $('#agregar4 form').on('submit', function () {
                var titulo4 = $('#titulo4').val();
                var contenido4 = $('#contenido4').val();
                var nuevaNota4 = {
                    tipo: 'cena',
                    titulo: titulo4,
                    contenido: contenido4,
                    cumplido: false
                };
                guardarNota(nuevaNota4);
                $.mobile.navigate('#cena');
                return false;
            });

            function guardarNota(nuevaNota4) {
                var notas = localStorage.getItem("notas");
                if (!notas) {
                    notas = [];
                } else {
                    notas = JSON.parse(notas);
                }
                notas.push(nuevaNota4);
                localStorage.setItem("notas", JSON.stringify(notas));
                cargarNotas('cena', '#notas4', 'nota4');
            }

            // Eventos para manejar la edición y eliminación de notas
            $('#notas4').on("click", ".nota4 .delete", function () {
                var eliminar_nota4 = confirm("¿Estás seguro que deseas eliminar la receta?");
                if (eliminar_nota4) {
                    $(this).parent().remove();
                    guardarNotasActualizadas();
                }
            });

            $('#notas4').on("click", ".nota4 .check", function () {
                if ($(this).next().next().next().attr("data-cumplido") != "si") {
                    $(this).parent().css({
                        backgroundColor: "white",
                        color: "green"
                    });
                    $(this).next().next().next().attr("data-cumplido", "si");
                    guardarNotasActualizadas();
                } else {
                    $(this).parent().css({
                        backgroundColor: "green",
                        color: "white"
                    });
                    $(this).next().next().next().removeAttr("data-cumplido");
                    guardarNotasActualizadas();
                }
            });

            $('#notas4').on("click", ".nota4 .edit", function () {
                var titulo_actual4 = $(this).parent().children("h3").text();
                var contenido_actual4 = $(this).parent().children("p").text();
                $('#modifica_titulo4').val(titulo_actual4);
                $('#modifica_contenido4').val(contenido_actual4);
                $(this).parent().attr("data-modificando", "este4");
                $.mobile.navigate('#modificar4');
            });

            $('#modificar4 form').on("submit", function () {
                var titulo_modificado4 = $('#modifica_titulo4').val();
                var contenido_modificado4 = $('#modifica_contenido4').val();
                var modificando4 = $('#notas4').find("[data-modificando]");
                modificando4.children('h3').text(titulo_modificado4);
                modificando4.children('p').text(contenido_modificado4);
                modificando4.removeAttr("data-modificando");
                guardarNotasActualizadas();

                $.mobile.navigate("#cena");
                return false;
            });

            function guardarNotasActualizadas() {
                var notas_actuales4 = [];
                $('#notas4 .nota4').each(function () {
                    var nota4 = {
                        tipo: 'cena',
                        titulo: $(this).find('h3').text(),
                        contenido: $(this).find('p').text(),
                        cumplido: $(this).attr('data-cumplido') === 'si' ? true : false
                    };
                    notas_actuales4.push(nota4);
                });

                var todasNotas = JSON.parse(localStorage.getItem("notas")) || [];
                todasNotas = todasNotas.filter(nota => nota.tipo !== 'cena').concat(notas_actuales4);
                localStorage.setItem("notas", JSON.stringify(todasNotas));
            }

            function cargarNotas(tipo, contenedor, claseNota) {
                var recuperados_json = localStorage.getItem("notas");
                if (recuperados_json != null && recuperados_json != undefined && recuperados_json != "") {
                    var recuperados_array = JSON.parse(recuperados_json);
                    $(contenedor).empty();
                    $.each(recuperados_array, function (indice, valor) {
                        if (valor.tipo === tipo) {
                            var nota = $('<div></div>');
                            nota.attr('class', claseNota)
                                .attr('data-cumplido', valor.cumplido ? 'si' : 'no')
                                .append('<a href="#" class="check"><img src="imagenes/a.png" alt="a"></a>')
                                .append('<a href="#" class="edit"><img src="imagenes/b.png" alt="b"></a>')
                                .append('<a href="#" class="delete"><img src="imagenes/c.png" alt="c"></a>')
                                .append('<h3>' + valor.titulo + '</h3>')
                                .append('<p>' + valor.contenido + '</p>');

                            if (valor.cumplido) {
                                nota.css({ backgroundColor: "green", color: "white" });
                            }

                            $(contenedor).append(nota);
                        }
                    });
                }
            }
        });
    </script>
    </div>
</body>

</html>
